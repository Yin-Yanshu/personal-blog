# 区块链笔记

## 2025.3.9

第一次正式学习 ethereum 官方文档，了解到很多科普性质知识。了解一些 web3 名词，以太坊 (ethereum)，以太币 (Ether，**ETH**)，钱包，去中心化金融 (**DeFi**)，稳定币，非同质化代币 (**NFT**)，去中心化自治组织 (**DAO**)，去中心化应用程序 (**DApps**)，layer2，共识机制。

大多数对 web3 科普介绍为，web1 只读，web2 可读可写，web3 可读可写可拥有。在 web3 的世界虚拟资产拥有权属于个人，在 web2 各大应用中用户只有使用权，应用提供商在必要情况下可以操作用户账号。

以太坊和以太币为整个生态的基石，其他各类乱七八糟的名词都是在生态上构建的各类应用，服务。类比 web2 互联网，提供了一个全球性的网络，允许数据的传输、交流。在此基础上发展出各类应用，电商应用，金融服务应用。
目前了解到一些较成熟应用类型

交易所，中心化交易所 (Centralized Exchange, **CEX**) 和去中心化交易所 (Decentralized Exchange, **DEX**)

稳定币，不具有波动性的加密货币，更像传统货币。通过和法币 (如美元)，贵金属绑定实现稳定比价格波动较小。还有通过其它加密资产（例如 ETH）作为支撑，通过更大量的底层加密货币支持稳定币的价格 (感觉不如前两点稳定)。目前还有算法稳定币，处于实验阶段。常见有 USDC，USDT 为不同公司发行的以美元为标的的稳定币。

非同质化代币 (Non-Fungible Token，**NFT**)，不理解 nft 的逻辑，感觉和链游一游也是一种击鼓传花

链游，游戏资产属于个人，可以对游戏资产进行交易。在 web2 中有 csgo 就有类似特征，枪械，刀具可以在玩家间流通并获取收益。链游同理，只是游戏资产存储与链上，游戏出品方从机制上无法控制游戏资产但 csgo 中可以。但 web3 中大多链游游玩目的是为了获取代币并出售变现，并不以游戏体验为主要目的，一但代币价格走低整个游戏循环很快会崩塌，类似旁氏，击鼓传花，没有新钱入场出售的代币价格会迅速崩塌。

## 生态架构图

![[web3生态架构图.webp]]

![[以太坊生态图.webp]]
## 名词列表

记录一些学习区块链领域碰到的新名词，估计名词后面还有很多需要了解的内容。

- 私有链、公有链、联盟链
- P2P 网络
- 零知识证明
- 同态加密
- 环签，盲签
- 全节点，轻节点
- Merkle Tree 默克尔树
- 比特币采用了一种叫 UTXO(Unspent Transaction Outputs) 的记账方式
- 硬分叉，软分叉
- 助记词 私钥 公钥 地址
- 混币机
- 现实世界资产（RWA）
- [跨链桥 （点对点跨链，聚合器跨链）](###跨链桥)
- DEX 聚合器
- 预言机（Oracle Machine）
- [ETHUSDT 永续](### ETHUSDT 永续)
- [常见以太坊标准](###常见以太坊标准)
- [共识机制](###共识机制)
- [共识层升级](###共识层升级)
- [Layer2 方案](###Layer2方案)
- [常见公链](###常见公链)
- [常见Layer2](###常见Layer2)
- [数据可用性](###数据可用性)
- Layer2 侧链 独立区块链区别
- MPC 钱包和多签钱包
-  [MPC多方安全计算](###MPC多方安全计算)
- 什么是 Optimistic Rollup ；Zero Knowledge Rollup；女巫攻击；双花攻击； uniswap v1 v2 v3； 一次性密码本； 账户抽象；隐私计算；同态加密；

## 3.10

### 零知识证明

zk-SNARKs (Zero-Knowledge Succinct Non-Interactive Argument of Knowledge)  
zk-STARKs (Zero-Knowledge Scalable Transparent ARguments of Knowledge)

### ETHUSDT 永续

永续全称为永续合约。合约理解为一种没有交割日期可以永久对赌的期货,是一种 web3 领域的金融衍生品。对于现货的实时价格要给对手方补差价使价格等于现货，当给对手方的差价大于保证金时则强制平仓。对于不上杠杆的合约虽然补差价金额较少，但价格波动大于保证金还是会被平仓。

### 常见以太坊标准

ERC-20  
ERC-721  
ERC-1155

### 共识机制

- 工作量证明 (Proof of Work, **PoW**)
- 权益证明 (Proof of Stake, **PoS**)
- 历史证明 (Proof of History, **PoH**)
- 实用拜占庭容错（Practical Byzantine Fault Tolerance, **PBFT**）

pow 机制获取控制权能力来自外部资金，外部资金购买足够多算力机器一获取链控制权。 如果恶意攻击导致链崩溃，再次出售算力机器似乎可以不受影响离场，自身收益影响较小。
pos 机制获取控制权能力来自链内部，ETH 来自区块链内部，获取链控制权需要使用 ETH，需使用外部资金购买大量 ETH 质押，外部资金锁定在链生态中，如果掌握足够 ETH 并作恶导致链崩溃，则外部资源兑换的 ETH 价值也会跌落，自身利益同时受损。  

### Layer2 方案
#### 状态通道（State Channels）  
#### 侧链（Sidechains）
#### Rollup

Optimistic Rollup  
Zero Knowledge Rollup

### 常见公链

以太坊（Ethereum）  
比特币（Bitcoin）  
Solana  
币安智能链（Binance Smart Chain, BSC），兼容以太坊虚拟机（EVM）  
波卡（Polkadot）  
Cosmos  
Avalanche  

### 常见 Layer2

Optimistic Rollup : Arbitrum , Optimism  
Zero Knowledge Rollup:  zkSync , Polygon, Loopring  

## 3.29

### 共识层升级

以太坊 2.0 现在被称为共识层升级。因为升级实际上是对以太坊网络共识机制方面的重大改进，而不是创建一个全新的网络。  
核心包括  
- 工作量证明（PoW）向权益证明（PoS）的转变（2022 年 The Merge 升级已完成）
- 数据分片技术的应用 （未完成，2024 年的坎昆（Cancun - Deneb）升级引入了 proto - danksharding 概念，这是分片技术的一种形式，为最终实现 danksharding 打下了基础。2025 年激活的 Hoodi 测试网，引入模块化分片架构。）提到 proto - danksharding 技术在扩大 calldata 容量为十几倍同事也引入清除机制，导致部分数据不像是不可篡改的永久数据，而是一段时间内不可篡改的缓存数据。
数据分片似乎不是共识层升级？


### 单个区块大小对去中心化的影响

如果区块链网络中单个区块大小增加，比如比特币区块由 1MB 增大到 4MB，可能会导致网络的中心化程度增加。因为单个区块大小增加会导致存储，带宽需求增加。对于许多个人用户或小型组织来说，不断增加的存储成本可能会成为一个重要障碍，导致无法运行全节点（当前比特币全节点数据超过 800GB 且预计每年增长 130GB，若单个区块空间增大四倍，年均存储增长量也会相应增大）。即使网络中有很多节点，但大部分都是轻节点，这个网络也是偏向中心化，因为轻节点验证依赖于全节点。

### 跨链桥

如果想比特币转移到以太坊生态中， 可以通过跨链桥得到以太坊上的 WBTC（Wrapped Bitcoin）， WBTC 是以太坊网络的 ERC-20 代币，是比特币的以太坊版本，而不是比特币区块链上的原始资产。且链生态多数用户认可 WBTC 是比特币的以太坊版本，若未取得共识则就是一个空气币。

有些链使用 wasm 作为 vm 层，联想到很多语言都可编译为 wasm 格式，是否区块链领域也往浏览器技术靠近以屏蔽不同硬件间差异，因为浏览器环境和 node 环境都可运行 wasm 文件。但似乎感觉这两个环境的性能并不高。

## 3.30

### 数据可用性

在区块链世界中充满着不信任和验证。对于从广播信号中接收的新区块都是**不可信状态**，通过自身节点信息**验证**后确认是否可信。可用性描述了一个程度，若一个新区块易于被网络中的节点验证是否可信则说明该区块具有高数据可用性。  简单的提高数据可用性方案为全节点下载每个区块中所有数据的副本并验证新区块是否可信，但该方案效率较低，需要较大存储空间。特别是如果验证 Layer2 打包后区块，需要 Layer1 节点下载所有 Layer2 区块。由于 Layer1 出块速度慢于 Layer2 ，所以 Layer1 节点不可能保存 Layer2 所有交易信息验证打包区块内是否有无效，作恶区块。  
如何提高数据可用性但验证时不需要所有全节点下载所有数据？当前一些常见解决方案：  
数据可用性采样 (DAS) ，数据分片技术 (Sharding）数据层提升验证能力  
各类 Rollup 方案，执行层提升验证能力


### 区块链功能模块分类

- 数据层（Data Layer），**存储**交易记录，状态数据
- 网络层（Network Layer），**广播**交易，区块信息
- 共识层（Consensus Layer），**验证**新区块的有效性
- 执行层（Execution Layer），**处理**执行智能合约和交易逻辑，验证区块的有效性
- 应用层（Application Layer），各类 DApp

各类 Rollup 方案在执行层提高区块链网络性能  
数据可用性采样 (DAS) ，分片技术 (Sharding）在数据存储层提高区块链网络性能  
在提高网络性能时要考虑数据可用性问题，是否过于偏向安全性 可扩展性 去中心化不可能三角的某一边导致可用性下降。  

经常描述区块链是公开透明 隐私保护。这看起来是两个对立的性质  
似乎可以把底层公链看作一种协议，使用不同的链就是使用不同协议

## 4.6

了解 Compound，AAVE 等区块链借贷平台

### RWA 和 NFT 之间差异

RWA 和 NFT 都是非同质化资产的交易形式，  
RWA 侧重于将实物资产数字化以增强其流动性，相比于 NFT，RWA 多了一个可分割性。  
NFT 主要用于创建和交易独一无二的数字内容，为数字内容提供一种所有权证明，类似一种版权。 
RWA 主要用于将高价值的实物资产（如大宗商品，汽车，艺术品）分割，增加流动性，快速转让。在传统金融市场的实物分割交易中一般由中间机构代持实物资产完整所有权，再分割转售资产。通过区块链技术可减少中间机构降低中间成本。目前只能理解相对于传统金融手段，区块链 RWA 交易效率更高，更透明。

## 5.18

了解 IPFS (InterPlanetary File System) 星际文件存储系统，一种点对点的分布式文件系统协议。 
使用文件 hash 唯一标识文件。 
分布式存储，将文件分块存储于不同节点，使用时通过唯一 hash 聚合所有分片。 
版本管理，修改文件生成新 hash，通过 hash 标识不同版本。 

了解 JSON-RPC (JavaScript Object Notation Remote Procedure Call) 远程调用协议。用于调用位于其他机器或进程中函数，实现类似本地调用函数效果。

了解账户抽象，使用合约地址代替传统的外部拥有账户，合约地址管理多个外部地址，合约地址代理用户操作，签名资产交易。目前处于发展初级阶段。

### MPC 多方安全计算

了解 MPC 钱包，多方签名钱包，将密钥分片存储在多个节点，减少设备损坏造成密钥丢失。并使用户完全用于私钥控制权。相比于使用 CEX 交易所账户管理资产，实际上是将私钥存储在 CEX 交易所中，理论上交易所有能力在非许可情况下操作资产。MPC 钱包托管在云端的私钥切片无法对公钥签名，理论上无法在非许可情况下操作资产。但 MPC 并非简单将完整私钥分为多段，如三段分别存储在多地，而是使用 MPC 算法，将多方私钥碎片组合计算后对资产进行签名，算法计算过程中，私钥并不显示暴露，任何一方都不知道完整私钥，但在计算过程中添加公钥地址可以正确签名资产以供网络中结点验证。常见的 MPC 实现算法有 Shamir 算法（Shamir's Secret Sharing， Shamir 秘密共享），GMW 算法。MPC 通过特殊的密码学算法实现私钥签名效果，但相比于传统公私钥签名方法存储更安全。若本地碎片遗失可通过某种密钥刷算法，生成新的三个碎片，，该碎片可对原地址正常签名，实现密钥遗失恢复的能力。

MPC 签名和多签签名都是将私钥掌控权分散到多个节点，但在技术实现方案和适用场景有所差异。

## 6.19

### Crypto Card (U 卡) 业务模式

Crypto Card 本质是预付卡，发卡方在 Visa/MasterCard 有银行账户，用户把稳定币打给发卡方，发卡方给你的卡分配支付额度。类似超市发的充值卡，只能用于支付，不能转账。因为实际由发卡方银行账户代替你支付费用，用户并没有一个真实银行账户，因为转账需要银行账户，所以无法转账。

### Fait24

## 6.20

法币抵押型稳定币已逐渐体现为主权信用的延伸

## 7.27

DefiLlama 是一个区块链数据分析平台，可展示各区块链上锁仓的加密资产总量；各类稳定币在不同链上的分布情况；哪些协议赚得最多（如 Uniswap、MakerDAO）；潜在空投机会，追踪用户与协议的交互情况等。

## 9.7

PolyMarket 预测市场

## 10.1

RWA DAT

## 10.27

了解hypeliquid

